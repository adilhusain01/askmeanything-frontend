import{j as o,r as p,u as de}from"./index-DiSxrv-Q.js";import{u as ne,f as le,c as pe,a as me,z as b,T as k,F as H,b as V}from"./index-BJC3sKLp.js";import{c as Q,u as Z,a as fe,Q as ge,B as J}from"./ReactToastify-BY4iBmDb.js";import{S as he,H as be,P as xe}from"./SwitchBase-BTvb7gM2.js";import{a as q,g as B,s as z,m as G,u as K,f as D,h as L,c as U,T as X,j as ie,b as ee,d as re,i as oe}from"./axios-BgR7D1K1.js";import{B as ve,a as ye}from"./Button-CLqCSmff.js";import{u as je}from"./ButtonBase-BeHNbSs-.js";import"./Paper-D_fCOp5v.js";const Ce=Q(o.jsx("path",{d:"M12 12c2.21 0 4-1.79 4-4s-1.79-4-4-4-4 1.79-4 4 1.79 4 4 4zm0 2c-2.67 0-8 1.34-8 4v2h16v-2c0-2.66-5.33-4-8-4z"}),"Person");function ke(e){return q("MuiAvatar",e)}B("MuiAvatar",["root","colorDefault","circular","rounded","square","img","fallback"]);const Re=e=>{const{classes:r,variant:s,colorDefault:t}=e;return L({root:["root",s,t&&"colorDefault"],img:["img"],fallback:["fallback"]},ke,r)},we=z("div",{name:"MuiAvatar",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,r[s.variant],s.colorDefault&&r.colorDefault]}})(G(({theme:e})=>({position:"relative",display:"flex",alignItems:"center",justifyContent:"center",flexShrink:0,width:40,height:40,fontFamily:e.typography.fontFamily,fontSize:e.typography.pxToRem(20),lineHeight:1,borderRadius:"50%",overflow:"hidden",userSelect:"none",variants:[{props:{variant:"rounded"},style:{borderRadius:(e.vars||e).shape.borderRadius}},{props:{variant:"square"},style:{borderRadius:0}},{props:{colorDefault:!0},style:{color:(e.vars||e).palette.background.default,...e.vars?{backgroundColor:e.vars.palette.Avatar.defaultBg}:{backgroundColor:e.palette.grey[400],...e.applyStyles("dark",{backgroundColor:e.palette.grey[600]})}}}]}))),_e=z("img",{name:"MuiAvatar",slot:"Img",overridesResolver:(e,r)=>r.img})({width:"100%",height:"100%",textAlign:"center",objectFit:"cover",color:"transparent",textIndent:1e4}),Se=z(Ce,{name:"MuiAvatar",slot:"Fallback",overridesResolver:(e,r)=>r.fallback})({width:"75%",height:"75%"});function Pe({crossOrigin:e,referrerPolicy:r,src:s,srcSet:t}){const[n,a]=p.useState(!1);return p.useEffect(()=>{if(!s&&!t)return;a(!1);let g=!0;const c=new Image;return c.onload=()=>{g&&a("loaded")},c.onerror=()=>{g&&a("error")},c.crossOrigin=e,c.referrerPolicy=r,c.src=s,t&&(c.srcset=t),()=>{g=!1}},[e,r,s,t]),n}const Fe=p.forwardRef(function(r,s){const t=K({props:r,name:"MuiAvatar"}),{alt:n,children:a,className:g,component:c="div",slots:i={},slotProps:j={},imgProps:u,sizes:m,src:d,srcSet:v,variant:F="circular",..._}=t;let f=null;const S=Pe({...u,src:d,srcSet:v}),h=d||v,y=h&&S!=="error",x={...t,colorDefault:!y,component:c,variant:F};delete x.ownerState;const P=Re(x),[C,N]=ne("img",{className:P.img,elementType:_e,externalForwardedProps:{slots:i,slotProps:{img:{...u,...j.img}}},additionalProps:{alt:n,src:d,srcSet:v,sizes:m},ownerState:x});return y?f=o.jsx(C,{...N}):a||a===0?f=a:h&&n?f=n[0]:f=o.jsx(Se,{ownerState:x,className:P.fallback}),o.jsx(we,{as:c,className:D(P.root,g),ref:s,..._,ownerState:x,children:f})});function ze(e){return q("MuiFormControlLabel",e)}const A=B("MuiFormControlLabel",["root","labelPlacementStart","labelPlacementTop","labelPlacementBottom","disabled","label","error","required","asterisk"]),Ie=e=>{const{classes:r,disabled:s,labelPlacement:t,error:n,required:a}=e,g={root:["root",s&&"disabled",`labelPlacement${U(t)}`,n&&"error",a&&"required"],label:["label",s&&"disabled"],asterisk:["asterisk",n&&"error"]};return L(g,ze,r)},Ne=z("label",{name:"MuiFormControlLabel",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[{[`& .${A.label}`]:r.label},r.root,r[`labelPlacement${U(s.labelPlacement)}`]]}})(G(({theme:e})=>({display:"inline-flex",alignItems:"center",cursor:"pointer",verticalAlign:"middle",WebkitTapHighlightColor:"transparent",marginLeft:-11,marginRight:16,[`&.${A.disabled}`]:{cursor:"default"},[`& .${A.label}`]:{[`&.${A.disabled}`]:{color:(e.vars||e).palette.text.disabled}},variants:[{props:{labelPlacement:"start"},style:{flexDirection:"row-reverse",marginRight:-11}},{props:{labelPlacement:"top"},style:{flexDirection:"column-reverse"}},{props:{labelPlacement:"bottom"},style:{flexDirection:"column"}},{props:({labelPlacement:r})=>r==="start"||r==="top"||r==="bottom",style:{marginLeft:16}}]}))),$e=z("span",{name:"MuiFormControlLabel",slot:"Asterisk",overridesResolver:(e,r)=>r.asterisk})(G(({theme:e})=>({[`&.${A.error}`]:{color:(e.vars||e).palette.error.main}}))),R=p.forwardRef(function(r,s){const t=K({props:r,name:"MuiFormControlLabel"}),{checked:n,className:a,componentsProps:g={},control:c,disabled:i,disableTypography:j,inputRef:u,label:m,labelPlacement:d="end",name:v,onChange:F,required:_,slots:f={},slotProps:S={},value:h,...y}=t,x=Z(),P=i??c.props.disabled??(x==null?void 0:x.disabled),C=_??c.props.required,N={disabled:P,required:C};["checked","name","onChange","value","inputRef"].forEach(l=>{typeof c.props[l]>"u"&&typeof t[l]<"u"&&(N[l]=t[l])});const W=le({props:t,muiFormControl:x,states:["error"]}),$={...t,disabled:P,labelPlacement:d,required:C,error:W.error},T=Ie($),E={slots:f,slotProps:{...g,...S}},[O,M]=ne("typography",{elementType:X,externalForwardedProps:E,ownerState:$});let I=m;return I!=null&&I.type!==X&&!j&&(I=o.jsx(O,{component:"span",...M,className:D(T.label,M==null?void 0:M.className),children:I})),o.jsxs(Ne,{className:D(T.root,a),ownerState:$,ref:s,...y,children:[p.cloneElement(c,N),C?o.jsxs("div",{children:[I,o.jsxs($e,{ownerState:$,"aria-hidden":!0,className:T.asterisk,children:["â€‰","*"]})]}):I]})});function Me(e){return q("MuiFormGroup",e)}B("MuiFormGroup",["root","row","error"]);const Te=e=>{const{classes:r,row:s,error:t}=e;return L({root:["root",s&&"row",t&&"error"]},Me,r)},De=z("div",{name:"MuiFormGroup",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,s.row&&r.row]}})({display:"flex",flexDirection:"column",flexWrap:"wrap",variants:[{props:{row:!0},style:{flexDirection:"row"}}]}),Ue=p.forwardRef(function(r,s){const t=K({props:r,name:"MuiFormGroup"}),{className:n,row:a=!1,...g}=t,c=Z(),i=le({props:t,muiFormControl:c,states:["error"]}),j={...t,row:a,error:i.error},u=Te(j);return o.jsx(De,{className:D(u.root,n),ownerState:j,ref:s,...g})}),Ae=Q(o.jsx("path",{d:"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm0 18c-4.42 0-8-3.58-8-8s3.58-8 8-8 8 3.58 8 8-3.58 8-8 8z"}),"RadioButtonUnchecked"),qe=Q(o.jsx("path",{d:"M8.465 8.465C9.37 7.56 10.62 7 12 7C14.76 7 17 9.24 17 12C17 13.38 16.44 14.63 15.535 15.535C14.63 16.44 13.38 17 12 17C9.24 17 7 14.76 7 12C7 10.62 7.56 9.37 8.465 8.465Z"}),"RadioButtonChecked"),Be=z("span",{shouldForwardProp:ie})({position:"relative",display:"flex"}),Ge=z(Ae)({transform:"scale(1)"}),Le=z(qe)(G(({theme:e})=>({left:0,position:"absolute",transform:"scale(0)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeIn,duration:e.transitions.duration.shortest}),variants:[{props:{checked:!0},style:{transform:"scale(1)",transition:e.transitions.create("transform",{easing:e.transitions.easing.easeOut,duration:e.transitions.duration.shortest})}}]})));function ce(e){const{checked:r=!1,classes:s={},fontSize:t}=e,n={...e,checked:r};return o.jsxs(Be,{className:s.root,ownerState:n,children:[o.jsx(Ge,{fontSize:t,className:s.background,ownerState:n}),o.jsx(Le,{fontSize:t,className:s.dot,ownerState:n})]})}const ue=p.createContext(void 0);function We(){return p.useContext(ue)}function Ee(e){return q("MuiRadio",e)}const te=B("MuiRadio",["root","checked","disabled","colorPrimary","colorSecondary","sizeSmall"]),Oe=e=>{const{classes:r,color:s,size:t}=e,n={root:["root",`color${U(s)}`,t!=="medium"&&`size${U(t)}`]};return{...r,...L(n,Ee,r)}},He=z(he,{shouldForwardProp:e=>ie(e)||e==="classes",name:"MuiRadio",slot:"Root",overridesResolver:(e,r)=>{const{ownerState:s}=e;return[r.root,s.size!=="medium"&&r[`size${U(s.size)}`],r[`color${U(s.color)}`]]}})(G(({theme:e})=>({color:(e.vars||e).palette.text.secondary,[`&.${te.disabled}`]:{color:(e.vars||e).palette.action.disabled},variants:[{props:{color:"default",disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette.action.activeChannel} / ${e.vars.palette.action.hoverOpacity})`:ee(e.palette.action.active,e.palette.action.hoverOpacity)}}},...Object.entries(e.palette).filter(re()).map(([r])=>({props:{color:r,disabled:!1,disableRipple:!1},style:{"&:hover":{backgroundColor:e.vars?`rgba(${e.vars.palette[r].mainChannel} / ${e.vars.palette.action.hoverOpacity})`:ee(e.palette[r].main,e.palette.action.hoverOpacity)}}})),...Object.entries(e.palette).filter(re()).map(([r])=>({props:{color:r,disabled:!1},style:{[`&.${te.checked}`]:{color:(e.vars||e).palette[r].main}}})),{props:{disableRipple:!1},style:{"&:hover":{"@media (hover: none)":{backgroundColor:"transparent"}}}}]})));function Ve(e,r){return typeof r=="object"&&r!==null?e===r:String(e)===String(r)}const ae=o.jsx(ce,{checked:!0}),se=o.jsx(ce,{}),w=p.forwardRef(function(r,s){const t=K({props:r,name:"MuiRadio"}),{checked:n,checkedIcon:a=ae,color:g="primary",icon:c=se,name:i,onChange:j,size:u="medium",className:m,disabled:d,disableRipple:v=!1,...F}=t,_=Z();let f=d;_&&typeof f>"u"&&(f=_.disabled),f??(f=!1);const S={...t,disabled:f,disableRipple:v,color:g,size:u},h=Oe(S),y=We();let x=n;const P=pe(j,y&&y.onChange);let C=i;return y&&(typeof x>"u"&&(x=Ve(y.value,t.value)),typeof C>"u"&&(C=y.name)),o.jsx(He,{type:"radio",icon:p.cloneElement(c,{fontSize:se.props.fontSize??u}),checkedIcon:p.cloneElement(a,{fontSize:ae.props.fontSize??u}),disabled:f,ownerState:S,classes:h,name:C,checked:x,onChange:P,ref:s,className:D(h.root,m),...F})});function Ye(e){return q("MuiRadioGroup",e)}B("MuiRadioGroup",["root","row","error"]);const Ke=e=>{const{classes:r,row:s,error:t}=e;return L({root:["root",s&&"row",t&&"error"]},Ye,r)},Y=p.forwardRef(function(r,s){const{actions:t,children:n,className:a,defaultValue:g,name:c,onChange:i,value:j,...u}=r,m=p.useRef(null),d=Ke(r),[v,F]=fe({controlled:j,default:g,name:"RadioGroup"});p.useImperativeHandle(t,()=>({focus:()=>{let h=m.current.querySelector("input:not(:disabled):checked");h||(h=m.current.querySelector("input:not(:disabled)")),h&&h.focus()}}),[]);const _=je(s,m),f=me(c),S=p.useMemo(()=>({name:f,onChange(h){F(h.target.value),i&&i(h,h.target.value)},value:v}),[f,i,F,v]);return o.jsx(ue.Provider,{value:S,children:o.jsx(Ue,{role:"radiogroup",ref:_,className:D(d.root,a),...u,children:n})})}),ar=()=>{const{user:e}=de(),[r,s]=p.useState({}),[t,n]=p.useState({username:"",email:"",age:"",gender:"",profile_picture_url:"",height:"",weight:"",occupation:"",smoking:!1,drinking:!1,body_type:"",size:"",hobbies:[],city:"",state:"",country:""}),[a,g]=p.useState({});p.useEffect(()=>{(async()=>{var m;try{const d=await oe.get(`https://hammerhead-app-qqm5y.ondigitalocean.app/api/users/${e.id}`,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});s(d.data),console.log(d.data)}catch(d){console.error("Profile fetch error",(m=d.response)==null?void 0:m.data)}})()},[e.id]),p.useEffect(()=>{r&&n({username:r.username||"",email:r.email||"",age:r.age||"",gender:r.gender||"",profile_picture_url:r.profile_picture_url||"",height:r.height||"",weight:r.weight||"",occupation:r.occupation||"",smoking:r.smoking||!1,drinking:r.drinking||!1,body_type:r.body_type||"",size:r.size||"",hobbies:r.hobbies||[],city:r.city||"",state:r.state||"",country:r.country||""})},[r]);const c=b.object({username:b.string().min(1,{message:"Username is required"}),email:b.string().email({message:"Invalid email address"}),age:b.number().optional(),gender:b.string().optional(),profile_picture_url:b.string().url().optional(),height:b.number().optional(),weight:b.number().optional(),occupation:b.string().optional(),smoking:b.boolean().optional(),drinking:b.boolean().optional(),body_type:b.string().optional(),size:b.number().optional(),hobbies:b.array(b.string()).optional(),city:b.string().optional(),state:b.string().optional(),country:b.string().optional()}),i=u=>{const{name:m,value:d,type:v}=u.target;n({...t,[m]:v==="number"?Number(d):d})},j=async u=>{var d,v,F,_,f,S,h,y,x,P,C,N,W,$,T,E,O,M,I;u.preventDefault();const m=c.safeParse(t);if(m.success){g({});try{const l=await oe.put(`https://hammerhead-app-qqm5y.ondigitalocean.app/api/users/${e.id}`,t,{headers:{Authorization:`Bearer ${localStorage.getItem("token")}`}});J.success("Profile updated successfully"),console.log("Profile updated successfully",l.data)}catch(l){J.error(((M=(O=l.response)==null?void 0:O.data)==null?void 0:M.message)||"Update error"),console.error("Update error",(I=l.response)==null?void 0:I.data)}}else{const l=m.error.format();g({username:((d=l.username)==null?void 0:d._errors[0])||"",email:((v=l.email)==null?void 0:v._errors[0])||"",age:((F=l.age)==null?void 0:F._errors[0])||"",gender:((_=l.gender)==null?void 0:_._errors[0])||"",profile_picture_url:((f=l.profile_picture_url)==null?void 0:f._errors[0])||"",height:((S=l.height)==null?void 0:S._errors[0])||"",weight:((h=l.weight)==null?void 0:h._errors[0])||"",occupation:((y=l.occupation)==null?void 0:y._errors[0])||"",smoking:((x=l.smoking)==null?void 0:x._errors[0])||"",drinking:((P=l.drinking)==null?void 0:P._errors[0])||"",body_type:((C=l.body_type)==null?void 0:C._errors[0])||"",size:((N=l.size)==null?void 0:N._errors[0])||"",hobbies:((W=l.hobbies)==null?void 0:W._errors[0])||"",city:(($=l.city)==null?void 0:$._errors[0])||"",state:((T=l.state)==null?void 0:T._errors[0])||"",country:((E=l.country)==null?void 0:E._errors[0])||""})}};return o.jsxs("main",{className:"flex flex-col w-full h-screen",children:[o.jsx(be,{}),o.jsx("section",{className:"flex flex-col items-center justify-center p-4",children:o.jsxs("div",{className:"px-[2.5rem] py-[2.5rem] flex flex-col items-center justify-center gap-[1rem] bg-white text-black rounded-xl",children:[o.jsx(Fe,{src:t.profile_picture_url,alt:"Profile Picture",sx:{width:100,height:100},children:!t.profile_picture_url&&o.jsx(xe,{})}),o.jsx(k,{fullWidth:!0,id:"profile_picture_url",label:"Profile Picture URL",name:"profile_picture_url",value:t.profile_picture_url,onChange:i,error:!!a.profile_picture_url,helperText:a.profile_picture_url}),o.jsxs(ve,{component:"form",onSubmit:j,noValidate:!0,className:"flex flex-col gap-4 w-full max-w-md",children:[o.jsx(k,{required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",value:t.username,onChange:i,error:!!a.username,helperText:a.username,disabled:!0}),o.jsx(k,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",value:t.email,onChange:i,error:!!a.email,helperText:a.email,disabled:!0}),o.jsx(k,{fullWidth:!0,id:"age",label:"Age",name:"age",type:"number",value:t.age,onChange:i,error:!!a.age,helperText:a.age}),o.jsxs(H,{component:"fieldset",children:[o.jsx(V,{component:"legend",children:"Gender"}),o.jsxs(Y,{row:!0,"aria-label":"gender",name:"gender",value:t.gender,onChange:i,children:[o.jsx(R,{value:"male",control:o.jsx(w,{}),label:"Male"}),o.jsx(R,{value:"female",control:o.jsx(w,{}),label:"Female"}),o.jsx(R,{value:"other",control:o.jsx(w,{}),label:"Other"})]})]}),o.jsx(k,{fullWidth:!0,id:"height",label:"Height (in Feets)",name:"height",type:"number",value:t.height,onChange:i,error:!!a.height,helperText:a.height}),o.jsx(k,{fullWidth:!0,id:"weight",label:"Weight (in Kgs)",name:"weight",type:"number",value:t.weight,onChange:i,error:!!a.weight,helperText:a.weight}),o.jsx(k,{fullWidth:!0,id:"occupation",label:"Occupation",name:"occupation",value:t.occupation,onChange:i,error:!!a.occupation,helperText:a.occupation}),o.jsxs(H,{component:"fieldset",children:[o.jsx(V,{component:"legend",children:"Body Type"}),o.jsxs(Y,{row:!0,"aria-label":"body_type",name:"body_type",value:t.body_type,onChange:i,children:[o.jsx(R,{value:"skinny",control:o.jsx(w,{}),label:"Skinny"}),o.jsx(R,{value:"ripped",control:o.jsx(w,{}),label:"Ripped"}),o.jsx(R,{value:"normal",control:o.jsx(w,{}),label:"Normal"}),o.jsx(R,{value:"healthy",control:o.jsx(w,{}),label:"Healthy"}),o.jsx(R,{value:"chubby",control:o.jsx(w,{}),label:"Chubby"})]})]}),o.jsx(k,{fullWidth:!0,id:"size",label:"Size",name:"size",type:"number",value:t.size,onChange:i,error:!!a.size,helperText:a.size}),o.jsx(k,{fullWidth:!0,id:"hobbies",label:"Hobbies",name:"hobbies",value:t.hobbies.join(", "),onChange:u=>n({...t,hobbies:u.target.value.split(",").map(m=>m.trim())}),error:!!a.hobbies,helperText:a.hobbies}),o.jsxs(H,{component:"fieldset",children:[o.jsx(V,{component:"legend",children:"Smoking"}),o.jsxs(Y,{row:!0,"aria-label":"smoking",name:"smoking",value:t.smoking.toString(),onChange:u=>n({...t,smoking:u.target.value==="true"}),children:[o.jsx(R,{value:"true",control:o.jsx(w,{}),label:"Yes"}),o.jsx(R,{value:"false",control:o.jsx(w,{}),label:"No"})]})]}),o.jsxs(H,{component:"fieldset",children:[o.jsx(V,{component:"legend",children:"Drinking"}),o.jsxs(Y,{row:!0,"aria-label":"drinking",name:"drinking",value:t.drinking.toString(),onChange:u=>n({...t,drinking:u.target.value==="true"}),children:[o.jsx(R,{value:"true",control:o.jsx(w,{}),label:"Yes"}),o.jsx(R,{value:"false",control:o.jsx(w,{}),label:"No"})]})]}),o.jsx(k,{fullWidth:!0,id:"city",label:"City",name:"city",value:t.city,onChange:i,error:!!a.city,helperText:a.city}),o.jsx(k,{fullWidth:!0,id:"state",label:"State",name:"state",value:t.state,onChange:i,error:!!a.state,helperText:a.state}),o.jsx(k,{fullWidth:!0,id:"country",label:"Country",name:"country",value:t.country,onChange:i,error:!!a.country,helperText:a.country}),o.jsx(ye,{type:"submit",fullWidth:!0,variant:"contained",sx:{color:"white",backgroundColor:"black",fontSize:"1rem",borderRadius:"0.75rem",padding:"0.5rem 2rem"},children:"Update Details"})]})]})}),o.jsx(ge,{})]})};export{ar as default};
