import{r as n,u as E,a as N,j as e,b as k}from"./index-DIf-sEGv.js";import{z as l,T as x,Q as C,B as w}from"./ReactToastify-Bx1bG9A7.js";import{a as B}from"./axios-BimPEqV4.js";import{B as P,a as D}from"./Button-D-Ffb1ex.js";import{T as j}from"./Typography-CfKGFZgn.js";import"./DefaultPropsProvider-B2oaWIJB.js";import"./Paper-Dt7QoGLR.js";import"./createSvgIcon-CJ8-75-N.js";const _=()=>{const[t,b]=n.useState(""),[o,v]=n.useState(""),[a,c]=n.useState({email:"",password:""}),m=E(),{login:y}=N(),S=l.object({email:l.string().email({message:"Invalid email address"}),password:l.string().min(6,{message:"Password must be at least 6 characters long"})}),T=async r=>{var u,p,h,f,g;r.preventDefault();const d=S.safeParse({email:t,password:o});if(d.success){c({email:"",password:""});try{const i=(await B.post("http://localhost:5000/api/auth",{email:t,password:o})).data.accessToken;localStorage.setItem("token",i),y(i);const L=k(i);w.success("Login successful! Let's fill the Questionaire"),L.doneQuestinoaire?m("/"):setTimeout(()=>{m("/info")},3500)}catch(s){w.error(((f=(h=s.response)==null?void 0:h.data)==null?void 0:f.message)||"Login error"),console.error("Login error",(g=s.response)==null?void 0:g.data),console.error("Login error",s)}}else{const s=d.error.format();c({email:((u=s.email)==null?void 0:u._errors[0])||"",password:((p=s.password)==null?void 0:p._errors[0])||""})}};return e.jsxs("main",{className:"flex items-center justify-center w-full h-screen",children:[e.jsx("div",{className:"px-[2.5rem] py-[2.5rem] bg-white rounded-xl min-w-[30rem]",children:e.jsxs(P,{component:"form",onSubmit:T,noValidate:!0,className:"flex flex-col items-center justify-center gap-[1.25rem]",children:[e.jsx(j,{component:"h1",variant:"h5",className:"text-center font-bold",children:"Login"}),e.jsx(x,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",autoFocus:!0,value:t,onChange:r=>b(r.target.value),error:!!a.email,helperText:a.email}),e.jsx(x,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"current-password",value:o,onChange:r=>v(r.target.value),error:!!a.password,helperText:a.password}),e.jsx(D,{type:"submit",fullWidth:!0,variant:"contained",sx:{color:"white",backgroundColor:"black",fontSize:"1rem",borderRadius:"0.75rem",padding:"0.5rem 2rem"},children:"Sign In"}),e.jsx("div",{children:e.jsxs(j,{variant:"body2",children:["Do not have an account?",e.jsx("a",{href:"/register",className:"text-blue-500",children:"Sign Up"})]})})]})}),e.jsx(C,{})]})};export{_ as default};
