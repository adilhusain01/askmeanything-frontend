import{r as w,u as C,j as e}from"./index-DLzKv8Ny.js";import{z as t,T as l,Q as R,B as x}from"./ReactToastify-B5vvbrec.js";import{a as T}from"./axios-BimPEqV4.js";import{B as q,a as N}from"./Button-0cpmRTNK.js";import{T as j}from"./Typography-DWuW90y8.js";import"./DefaultPropsProvider-Dwbbp7-Q.js";import"./Paper-BeGDeERd.js";import"./createSvgIcon-lw6mFsOP.js";const U=()=>{const[a,b]=w.useState({email:"",username:"",password:"",confirmPassword:""}),[s,d]=w.useState({}),P=C(),v=t.object({email:t.string().email({message:"Invalid email address"}),username:t.string().min(1,{message:"Username is required"}).regex(/^[a-zA-Z0-9_]+$/,{message:"Username can only contain letters, numbers, and underscores"}),password:t.string().min(6,{message:"Password must be at least 6 characters long"}),confirmPassword:t.string().min(6,{message:"Password confirmation is required"})}).refine(o=>o.password===o.confirmPassword,{message:"Passwords don't match",path:["confirmPassword"]}),n=o=>{const{name:i,value:m}=o.target;b({...a,[i]:m})},y=async o=>{var m,c,u,p,f,h,g;o.preventDefault();const i=v.safeParse(a);if(i.success){d({});try{const r=await T.post("https://hammerhead-app-qqm5y.ondigitalocean.app/api/users",a);x.success("Registration successful! Redirecting to Login"),console.log("Registration successful",r.data),setTimeout(()=>{P("/info")},2e3)}catch(r){x.error(((h=(f=r.response)==null?void 0:f.data)==null?void 0:h.message)||"Registration error"),console.error("Registration error",(g=r.response)==null?void 0:g.data)}}else{const r=i.error.format();d({email:((m=r.email)==null?void 0:m._errors[0])||"",username:((c=r.username)==null?void 0:c._errors[0])||"",password:((u=r.password)==null?void 0:u._errors[0])||"",confirmPassword:((p=r.confirmPassword)==null?void 0:p._errors[0])||""})}};return e.jsxs("main",{className:"flex items-center justify-center w-full h-screen",children:[e.jsx("div",{className:"px-[2.5rem] py-[2.5rem] bg-white rounded-xl min-w-[30rem]",children:e.jsxs(q,{component:"form",onSubmit:y,noValidate:!0,className:"flex flex-col items-center justify-center gap-[1.25rem]",children:[e.jsx(j,{component:"h1",variant:"h5",className:"text-center font-bold",children:"Register"}),e.jsx(l,{required:!0,fullWidth:!0,id:"username",label:"Username",name:"username",autoComplete:"username",value:a.username,onChange:n,error:!!s.username,helperText:s.username}),e.jsx(l,{required:!0,fullWidth:!0,id:"email",label:"Email Address",name:"email",autoComplete:"email",value:a.email,onChange:n,error:!!s.email,helperText:s.email}),e.jsx(l,{required:!0,fullWidth:!0,name:"password",label:"Password",type:"password",id:"password",autoComplete:"new-password",value:a.password,onChange:n,error:!!s.password,helperText:s.password}),e.jsx(l,{required:!0,fullWidth:!0,name:"confirmPassword",label:"Confirm Password",type:"password",id:"confirmPassword",autoComplete:"new-password",value:a.confirmPassword,onChange:n,error:!!s.confirmPassword,helperText:s.confirmPassword}),e.jsx(N,{type:"submit",fullWidth:!0,variant:"contained",sx:{color:"white",backgroundColor:"black",fontSize:"1rem",borderRadius:"0.75rem",padding:"0.5rem 2rem"},children:"Register"}),e.jsx("div",{children:e.jsxs(j,{variant:"body2",children:["Already have an account?"," ",e.jsx("a",{href:"/login",className:"text-blue-500",children:"Login"})]})})]})}),e.jsx(R,{})]})};export{U as default};
